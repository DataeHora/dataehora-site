<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feriad√µes e Pontes | Data e Hora</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --accent: #38bdf8; --border: rgba(148, 163, 184, 0.1); }
        [data-theme="light"] { --bg: #f1f5f9; --card: #ffffff; --text: #0f172a; --accent: #0284c7; --border: rgba(0, 0, 0, 0.05); }
        body { background: var(--bg); color: var(--text); font-family: system-ui, sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { width: 100%; max-width: 600px; }
        .nav-links { display: flex; gap: 10px; margin-bottom: 30px; }
        .btn-nav { padding: 8px 18px; border-radius: 50px; background: var(--card); color: var(--text); text-decoration: none; font-size: 0.85rem; border: 1px solid var(--border); }
        h1 { text-align: center; color: var(--accent); margin-bottom: 10px; }
        .desc { text-align: center; color: #94a3b8; margin-bottom: 40px; }
        .bridge-card { background: var(--card); border-radius: 20px; padding: 20px; margin-bottom: 20px; border-left: 5px solid var(--accent); display: flex; justify-content: space-between; align-items: center; }
        .bridge-info h3 { margin: 0; font-size: 1.1rem; }
        .bridge-info p { margin: 5px 0 0 0; color: #94a3b8; font-size: 0.9rem; }
        .badge { background: rgba(56, 189, 248, 0.1); color: var(--accent); padding: 5px 12px; border-radius: 10px; font-weight: 700; font-size: 0.8rem; }
        .loader { border: 3px solid rgba(56, 189, 248, 0.2); border-left-color: var(--accent); border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 50px auto; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body data-theme="dark">
    <div class="nav-links">
        <a href="/" class="btn-nav">üè† In√≠cio</a>
        <a href="../" class="btn-nav">üìÖ Voltar</a>
    </div>

    <div class="container">
        <h1 id="title">Feriad√µes</h1>
        <p class="desc">Feriados que permitem emendar ou criar fins de semana prolongados.</p>
        <div id="loader" class="loader"></div>
        <div id="results"></div>
    </div>

    <script>
        async function checkBridges() {
            const year = new Date().getFullYear();
            document.getElementById('title').textContent = `Feriad√µes ${year}`;
            try {
                const res = await fetch(`https://brasilapi.com.br/api/feriados/v1/${year}`);
                const holidays = await res.json();
                const container = document.getElementById('results');
                
                holidays.forEach(h => {
                    const d = new Date(h.date + "T00:00:00");
                    const dayOfWeek = d.getDay(); // 0 Dom, 1 Seg, 2 Ter, 4 Qui, 5 Sex, 6 Sab
                    
                    let status = "";
                    if (dayOfWeek === 1 || dayOfWeek === 5) status = "Fim de Semana Prolongado";
                    else if (dayOfWeek === 2 || dayOfWeek === 4) status = "Possibilidade de Ponte";
                    
                    if (status !== "") {
                        container.innerHTML += `
                            <div class="bridge-card">
                                <div class="bridge-info">
                                    <h3>${h.name}</h3>
                                    <p>${d.toLocaleDateString('pt-BR', {day:'2-digit', month:'long'})} ‚Ä¢ ${d.toLocaleDateString('pt-BR', {weekday:'long'})}</p>
                                </div>
                                <div class="badge">${status}</div>
                            </div>`;
                    }
                });
                document.getElementById('loader').style.display = 'none';
            } catch (e) { console.error(e); }
        }

        const savedTheme = localStorage.getItem('theme-pref-dataehora') || 'auto';
        document.body.setAttribute('data-theme', savedTheme === 'auto' ? (new Date().getHours() >= 6 && new Date().getHours() < 18 ? 'light' : 'dark') : savedTheme);
        checkBridges();
    </script>
</body>
</html>
